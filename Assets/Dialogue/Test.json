{
  "id": "crusia_fountain",
  "startNodeId": "intro",
  "numericVars": [
    { "name": "favorCrusia", "value": 0 }
  ],
  "flagVars": [
    { "name": "metCrusia", "value": false },
    { "name": "askedShop", "value": false },
    { "name": "askedBreak", "value": false }
  ],
  "nodes": [
    {
      "id": "intro",
      "steps": [
        { "kind": "set",
          "set": [{ "type":"flag", "var":"metCrusia", "op":"setTrue" }] },

        { "kind": "line",
          "speaker": "크루시아",
          "text": "방랑자님, 저기 멍하니 서 있지 말고 이리 오세요!" },

        { "kind": "line",
          "speaker": "크루시아",
          "text": "사실 지금은 잡화점 당번인데... 잠깐 도망 나온 거예요. 가게 안에만 있으면 머리에서 연기 날 것 같거든요." },

        { "kind": "choice",
          "prompt": "<이름>, 뭘 물어볼까?",
          "options": [
            {
              "text": "잡화점 일은 어때?",
              "ifAll": [
                { "type":"flag","var":"askedShop","op":"==","value":"false" }
              ],
              "set": [
                { "type":"flag","var":"askedShop","op":"setTrue" },
                { "type":"num","var":"favorCrusia","op":"+=","num":1 }
              ],
              "nextNodeId": "ask_shop"
            },
            {
              "text": "잠깐 쉰다는 건... 규정 위반 아닌가요?",
              "ifAll": [
                { "type":"flag","var":"askedBreak","op":"==","value":"false" }
              ],
              "set": [
                { "type":"flag","var":"askedBreak","op":"setTrue" },
                { "type":"num","var":"favorCrusia","op":"+=","num":0.5 }
              ],
              "nextNodeId": "ask_break"
            },
            {
              "text": "그냥 수다를 떨자.",
              "set": [
                { "type":"num","var":"favorCrusia","op":"+=","num":0.5 }
              ],
              "nextNodeId": "chitchat"
            }
          ]
        },

        { "kind": "goto", "gotoNode": "post_choice" }
      ]
    },

    {
      "id": "ask_shop",
      "steps": [
        { "kind": "line", "speaker": "크루시아", "text": "잡화점 일요? 물건 채우고 사람들 얘기 듣고... 가끔은 그게 전투보다 더 힘들어요." },
        { "kind": "goto", "gotoNode": "intro" }
      ]
    },

    {
      "id": "ask_break",
      "steps": [
        { "kind": "line", "speaker": "크루시아", "text": "규정... 에헴, 중요한 건 균형이죠. 머리가 식어야 다시 잘 굴러가니까요." },
        { "kind": "goto", "gotoNode": "intro" }
      ]
    },

    {
      "id": "chitchat",
      "steps": [
        { "kind": "line", "speaker": "크루시아", "text": "그럼... 오늘은 하늘이 예쁘네요. 분수 물소리도 좋고요." },
        { "kind": "goto", "gotoNode": "intro" }
      ]
    },

    {
      "id": "post_choice",
      "steps": [
        {
          "kind": "line",
          "speaker": "크루시아",
          "text": "<i>(크루시아가 다리를 살짝 흔든다.)</i> 오늘 컨디션은 {favor}에요.",
          "ifAll": []
        },
        {
          "kind": "choice",
          "prompt": "이제 어떻게 할까?",
          "options": [
            {
              "text": "이만 가볼게.",
              "set": [],
              "nextNodeId": "end_node"
            },
            {
              "text": "조금만 더 이야기하자.",
              "set": [],
              "nextNodeId": "chitchat"
            }
          ]
        }
      ]
    },

    {
      "id": "end_node",
      "steps": [
        { "kind": "line", "speaker": "크루시아", "text": "또 봐요, <이름>!" }
      ]
    }
  ]
}
